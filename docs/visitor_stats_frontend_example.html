<!-- è®¿é—®ç»Ÿè®¡å‰ç«¯å±•ç¤ºç¤ºä¾‹ -->
<!-- å¯ä»¥å°†è¿™æ®µä»£ç æ·»åŠ åˆ° index.html çš„åˆé€‚ä½ç½® -->

<!-- 1. æ·»åŠ æ ·å¼ï¼ˆæ”¾åœ¨ <head> æ ‡ç­¾ä¸­æˆ– base.css æ–‡ä»¶ä¸­ï¼‰ -->
<style>
.visitor-stats {
    text-align: center;
    padding: 20px;
    margin: 20px 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.stats-container {
    display: flex;
    justify-content: center;
    gap: 40px;
    flex-wrap: wrap;
}

.stat-item {
    color: white;
    text-align: center;
}

.stat-item .label {
    font-size: 14px;
    opacity: 0.9;
    margin-bottom: 5px;
}

.stat-item .value {
    font-size: 32px;
    font-weight: bold;
    line-height: 1.2;
}

.stat-item .icon {
    font-size: 24px;
    margin-right: 5px;
}

@media (max-width: 768px) {
    .stats-container {
        gap: 20px;
    }
    
    .stat-item .value {
        font-size: 24px;
    }
}
</style>

<!-- 2. æ·»åŠ HTMLç»“æ„ï¼ˆæ”¾åœ¨é¡µé¢åˆé€‚çš„ä½ç½®ï¼‰ -->
<div class="visitor-stats">
    <div class="stats-container">
        <div class="stat-item">
            <div class="label">
                <span class="icon">ğŸ‘ï¸</span>
                ä»Šæ—¥è®¿é—®
            </div>
            <div class="value" id="today-pv">-</div>
        </div>
        <div class="stat-item">
            <div class="label">
                <span class="icon">ğŸ‘¥</span>
                ä»Šæ—¥è®¿å®¢
            </div>
            <div class="value" id="today-uv">-</div>
        </div>
        <div class="stat-item">
            <div class="label">
                <span class="icon">ğŸ“Š</span>
                æ€»è®¿é—®é‡
            </div>
            <div class="value" id="total-pv">-</div>
        </div>
    </div>
</div>

<!-- 3. æ·»åŠ JavaScriptä»£ç ï¼ˆæ”¾åœ¨ </body> ä¹‹å‰ï¼‰ -->
<script>
(function() {
    // åŠ è½½è®¿é—®ç»Ÿè®¡æ•°æ®
    function loadVisitorStats() {
        fetch('/stats/summary?pagePath=/')
            .then(response => response.json())
            .then(data => {
                if (data.code === 200 && data.data) {
                    // æ›´æ–°ä»Šæ—¥æ•°æ®
                    updateElement('today-pv', data.data.today.pv);
                    updateElement('today-uv', data.data.today.uv);
                    
                    // æ›´æ–°æ€»æ•°æ®
                    updateElement('total-pv', data.data.total.totalPv);
                }
            })
            .catch(error => {
                console.error('åŠ è½½è®¿é—®ç»Ÿè®¡å¤±è´¥:', error);
                // å¤±è´¥æ—¶æ˜¾ç¤ºå ä½ç¬¦
                updateElement('today-pv', '0');
                updateElement('today-uv', '0');
                updateElement('total-pv', '0');
            });
    }
    
    // æ ¼å¼åŒ–æ•°å­—ï¼ˆæ·»åŠ åƒåˆ†ä½ï¼‰
    function formatNumber(num) {
        if (num === undefined || num === null) return '0';
        return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
    }
    
    // æ›´æ–°å…ƒç´ å†…å®¹
    function updateElement(id, value) {
        const element = document.getElementById(id);
        if (element) {
            element.textContent = formatNumber(value);
            // æ·»åŠ æ¸å…¥åŠ¨ç”»
            element.style.opacity = '0';
            setTimeout(() => {
                element.style.transition = 'opacity 0.5s';
                element.style.opacity = '1';
            }, 100);
        }
    }
    
    // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', loadVisitorStats);
    } else {
        loadVisitorStats();
    }
})();
</script>

<!-- æ–¹æ¡ˆ2: ç®€æ´ç‰ˆï¼ˆåªæ˜¾ç¤ºæ€»è®¿é—®é‡ï¼‰ -->
<!--
<div style="text-align: center; padding: 10px; color: #666;">
    <span>ğŸ‘ï¸ è®¿é—®é‡: <strong id="total-visits" style="color: #667eea;">-</strong></span>
</div>

<script>
fetch('/stats/total?pagePath=/')
    .then(res => res.json())
    .then(data => {
        if (data.code === 200) {
            document.getElementById('total-visits').textContent = 
                data.data.totalPv.toLocaleString();
        }
    });
</script>
-->

<!-- æ–¹æ¡ˆ3: åœ¨é¡µè„šæ˜¾ç¤º -->
<!--
<style>
.footer-stats {
    text-align: center;
    padding: 10px;
    font-size: 12px;
    color: #999;
}
.footer-stats strong {
    color: #667eea;
}
</style>

<div class="footer-stats">
    æœ¬ç«™æ€»è®¿é—®é‡: <strong id="site-visits">-</strong> æ¬¡ | 
    ä»Šæ—¥è®¿é—®: <strong id="today-visits">-</strong> æ¬¡
</div>

<script>
fetch('/stats/summary?pagePath=/')
    .then(res => res.json())
    .then(data => {
        if (data.code === 200) {
            document.getElementById('site-visits').textContent = 
                data.data.total.totalPv.toLocaleString();
            document.getElementById('today-visits').textContent = 
                data.data.today.pv.toLocaleString();
        }
    });
</script>
-->

